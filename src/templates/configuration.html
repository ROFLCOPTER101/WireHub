<html lang="en">
{% with title=title%}
{% include "header.html"%}
{% endwith %}
{% set context = "configuration"%}
<body>
    <div class="no-response">
        <div class="container">
            <h1 class="text-white display-1"><i class="bi bi-x-square"></i></h1>
            <h4 class="text-white">Сервер недоступен</h4>
        </div>
    </div>
    {% include "navbar.html" %}
    <div class="container-fluid" id="right_body">
        <div id="config_body">
            <main role="main" class="shadow" style="margin-bottom: 10rem !important; padding-left: 40;">
                <div class="info mt-4">
                    <!-- Название конфигурации -->
                    <div class="row">
                        <div class="col" style="margin-left:150;">
                            <small class="text-muted"><strong>КОНФИГУРАЦИЯ<strong></small>
                            <h1 class="mb-3"><samp id="conf_name">{{ title }}</samp></h1>
                        </div>
                    </div>
                
                    <!-- Все параметры в одном row -->
                    <div class="row">
                        <!-- Параметры статуса и подключенных пользователей -->
                        <div class="col-3">
                            <div class="col">
                                <small class="text-muted"><strong>СОСТОЯНИЕ</strong></small>
                                <h6 style="text-transform: uppercase;" id="conf_status" class="info_loading"></h6>
                            </div>
                            <div class="col">
                                <small class="text-muted"><strong>ПОДКЛЮЧЁННЫЕ ПОЛЬЗОВАТЕЛИ</strong></small>
                                <h6 style="text-transform: uppercase;" id="conf_connected_peers" class="info_loading"></h6>
                            </div>
                        </div>
                        <!-- Параметры публичного ключа, порта и адреса -->
                        <div class="col-4">
                            <div class="col">
                                <small class="text-muted">
                                    <strong>ПУБЛИЧНЫЙ КЛЮЧ</strong>
                                    <strong style="margin-left: auto!important; opacity: 0; transition: 0.2s ease-in-out" class="text-primary">СКОПИРОВАТЬ</strong>
                                </small>
                                <h6 class="info_loading"><samp class="key" id="conf_public_key"></samp></h6>
                            </div>
                            <div class="col">
                                <small class="text-muted"><strong>ПРОСЛУШИВАЕМЫЙ ПОРТ</strong></small>
                                <h6 style="text-transform: uppercase;" class="info_loading"><samp id="conf_listen_port"></samp></h6>
                            </div>
                            <div class="col">
                                <small class="text-muted"><strong>IP-адрес</strong></small>
                                <h6 style="text-transform: uppercase;" class="info_loading"><samp id="conf_address"></samp></h6>
                            </div>
                        </div>
                        <!-- Параметры общего использования данных, полученных данных и отправленных данных -->
                        <div class="col-2">
                            <div class="col">
                                <small class="text-muted"><strong>ОБЩИЙ ТРАФИК</strong></small>
                                <h6 style="text-transform: uppercase;" id="conf_total_data_usage" class="info_loading"></h6>
                            </div>
                            <div class="col">
                                <small class="text-muted"><strong>ВСЕГО ПОЛУЧЕНО</strong></small>
                                <h6 style="text-transform: uppercase;" id="conf_total_data_received" class="info_loading"></h6>
                            </div>
                            <div class="col">
                                <small class="text-muted"><strong>ВСЕГО ОТПРАВЛЕНО</strong></small>
                                <h6 style="text-transform: uppercase;" id="conf_total_data_sent" class="info_loading"></h6>
                            </div>
                    </div>
                </div>
                
                <div class="chartContainer" style="border-bottom: 2px;border-top-style: solid;border-top-width: 2px;border-left-width: 2px;border-left-style: solid;border-right-width: 2px;border-right-style: solid;border-bottom-width: 2px;border-bottom-style: solid;max-width: 1300px;">
                    <div class="col-sm">
                        <div class="chartTitle">
                            <h6>Data Usage / Refresh Interval</h6>
                        </div>
                        <div class="chartCanvasContainer" style="width: 85%; height: 300px; margin-left: 100px">
                            <canvas id="totalDataUsageChartObj" width="85" height="85"></canvas>
                        </div>
                    </div>
                </div>
                <div class="button-div mb-3">
                    <div class="row">
                        <div class="col-md d-none">
                            <div class="row">
                                <div class="col-md">
                                    <div class="form-group">
                                        <label for="search_peer_textbox"><small class="text-muted">Search
                                                Peers</small></label>
                                        <input type="text" class="form-control" id="search_peer_textbox"
                                            placeholder="Enter Peer's Name" value="">
                                    </div>
                                </div>
                                <div class="col-md">
                                    <div class="form-group">
                                        <label for="sort_by_dropdown"><small class="text-muted">Sort Peers
                                                By</small></label>
                                        <select class="form-control" id="sort_by_dropdown">
                                            <option value="status">Status</option>
                                            <option value="name">Name</option>
                                            <option value="allowed_ip">Allowed IP</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-none">
                            <div class="form-group">
                                <label><small class="text-muted">Refresh Interval</small></label><br>
                                <div class="btn-group interval-btn-group" role="group" style="width: 100%">
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary btn-group-label refresh" data-toggle="tooltip"
                                        data-placement="bottom" title="Refresh Peers"><i
                                            class="bi bi-arrow-repeat"></i></button>
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary update_interval"
                                        data-refresh-interval="5000">5s</button>
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary update_interval"
                                        data-refresh-interval="10000">10s</button>
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary update_interval"
                                        data-refresh-interval="30000">30s</button>
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary update_interval"
                                        data-refresh-interval="60000">1m</button>
                                </div>
                            </div>
                        </div>
                        <div class="col-md d-none">
                            <div class="form-group">
                                <label><small class="text-muted">Display Mode</small></label><br>
                                <div class="btn-group display-btn-group" role="group" style="width: 100%">
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary display_mode" data-display-mode="grid"><i
                                            class="bi bi-grid-fill" style="font-size: 1.5rem;"></i></button>
                                    <button style="width: 20%" type="button"
                                        class="btn btn-outline-primary display_mode" data-display-mode="list"><i
                                            class="bi bi-list" style="font-size: 1.5rem;"></i></button>
                                </div>
                            </div>
                        </div>
                        <div class="btn-manage-group">
                            <div class="col">
                                <div class="text-right">
                                    <small class="text-muted"><strong>ВЫКЛ/ВКЛ</strong></small><br>
                                    <div id="switch" class="info_loading">
                                        <input type="checkbox" class="toggle--switch" id="toggle--switch">
                                        <label for="toggle--switch" class="toggleLabel"></label>
                                    </div>
                                </div>
                            </div>
                            <button type="button" class="btn btn-primary add_btn"><i
                                    class="bi bi-plus-lg"></i></button>
                            <button type="button" class="btn btn-secondary setting_btn"><i
                                    class="bi bi-three-dots"></i></button>
                            <div class="setting_btn_menu">
                                <a class="text-danger" id="delete_peers_by_bulk_btn"><i class="bi bi-trash-fill"></i>
                                    Удалить пользователей</a>
                                <a class="text-info" id="download_all_peers"
                                    data-url="/download_all/{{conf_data['name']}}"><i
                                        class="bi bi-cloud-download-fill"></i>Архив пользователей</a>
                                <hr>
                                <a class="text-primary" id="edit_configuration"><i class="bi bi-gear-fill"></i>
                                    Параметры конфигурации</a>
                                <a class="text-danger" id="configuration_delete"><i class="bi bi-trash3-fill"></i>
                                    Удалить уонфигурацию</a>
                            </div>
                        </div>

                    </div>
                </div>
                <div class="row peer_list d-none"></div>
                <small id="peer_loading_time d-none" class="text-muted"></small>
            </main>
        </div>
    </div>
    {% include "modal.html" %}
    <div class="position-fixed top-0 right-0 p-3 toastContainer" style="z-index: 5; right: 0; top: 50px;"></div>
    {% include "tools.html" %}
</body>
{% include "footer.html" %}
<script src="{{ url_for('static',filename='js/configuration.js') }}"></script>
<script src="{{ url_for('static',filename='js/configurationTool.js') }}"></script>
<script src="{{ url_for('static',filename='js/wireguard.js') }}"></script>
<script>
    configurations.setConfigurationName("{{ conf_data['name'] }}");
    configurations.setActiveConfigurationName();
    configurations.loadPeers($('#search_peer_textbox').val());
</script>

</html>